{
    "openapi": "3.0.2",
    "info": {
        "title": "Location Service API",
        "version": "2023-01-01",
        "description": "A comprehensive service for managing user locations and geographic data with full CRUD operations. This service provides user location management (home, work, billing, shipping addresses), geographic data hierarchy (countries, regions, cities, neighborhoods), location type categorization and validation, geospatial coordinates support (latitude/longitude), and postal code and address validation."
    },
    "paths": {
        "/cities/{cityId}/neighborhoods": {
            "get": {
                "description": "Retrieves neighborhoods within a specific city. Returns all neighborhoods that belong to the specified city. Used for detailed address specification in location forms.",
                "operationId": "GetNeighborhoodsByCity",
                "parameters": [
                    {
                        "name": "cityId",
                        "in": "path",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "GetNeighborhoodsByCity 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetNeighborhoodsByCityResponseContent"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "NotFoundError 404 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/countries": {
            "get": {
                "description": "Retrieves list of available countries. Returns all countries in the system with optional search functionality. Used for populating country selection in location forms.",
                "operationId": "GetCountries",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "GetCountries 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetCountriesResponseContent"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/countries/{countryId}/regions": {
            "get": {
                "description": "Retrieves regions within a specific country. Returns all regions (states, provinces) that belong to the specified country. Used for cascading geographic selection in location forms.",
                "operationId": "GetRegionsByCountry",
                "parameters": [
                    {
                        "name": "countryId",
                        "in": "path",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "GetRegionsByCountry 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetRegionsByCountryResponseContent"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "NotFoundError 404 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/locations": {
            "get": {
                "description": "Lists locations with filtering and pagination. Returns a paginated list of locations with optional filtering by user ID and location type. Supports pagination for efficient data retrieval.",
                "operationId": "ListLocations",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "size",
                        "in": "query",
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "userId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "locationType",
                        "in": "query",
                        "schema": {
                            "$ref": "#/components/schemas/LocationType"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "ListLocations 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ListLocationsResponseContent"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "Creates a new location for a user. Registers a new location with complete address information including geographic hierarchy (country, region, city, neighborhood) and optional geospatial coordinates. Supports multiple location types per user.",
                "operationId": "CreateLocation",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateLocationRequestContent"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "CreateLocation 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CreateLocationResponseContent"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "ValidationError 400 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponseContent"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "ConflictError 409 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ConflictErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/locations/{locationId}": {
            "delete": {
                "description": "Deletes a location. Permanently removes a location from the system. This operation cannot be undone. Consider using status updates for soft deletion instead.",
                "operationId": "DeleteLocation",
                "parameters": [
                    {
                        "name": "locationId",
                        "in": "path",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "DeleteLocation 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeleteLocationResponseContent"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "NotFoundError 404 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "description": "Retrieves a location by its unique identifier. Returns complete location information including resolved geographic hierarchy with country, region, city, and neighborhood details.",
                "operationId": "GetLocation",
                "parameters": [
                    {
                        "name": "locationId",
                        "in": "path",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "GetLocation 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetLocationResponseContent"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "NotFoundError 404 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "description": "Updates an existing location's information. Allows partial updates to location fields including address, geographic references, coordinates, and location type. All fields are optional.",
                "operationId": "UpdateLocation",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateLocationRequestContent"
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "locationId",
                        "in": "path",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "UpdateLocation 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UpdateLocationResponseContent"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "ValidationError 400 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponseContent"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "NotFoundError 404 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/regions/{regionId}/cities": {
            "get": {
                "description": "Retrieves cities within a specific region. Returns all cities that belong to the specified region. Used for cascading geographic selection in location forms.",
                "operationId": "GetCitiesByRegion",
                "parameters": [
                    {
                        "name": "regionId",
                        "in": "path",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "GetCitiesByRegion 200 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetCitiesByRegionResponseContent"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "NotFoundError 404 response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundErrorResponseContent"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "CityInfo": {
                "type": "object",
                "properties": {
                    "cityId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "regionId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "cityId",
                    "createdAt",
                    "name",
                    "regionId",
                    "status",
                    "updatedAt"
                ]
            },
            "CityResponse": {
                "type": "object",
                "properties": {
                    "cityId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "regionId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "cityId",
                    "createdAt",
                    "name",
                    "regionId",
                    "status",
                    "updatedAt"
                ]
            },
            "ConflictErrorResponseContent": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "message"
                ]
            },
            "CountryInfo": {
                "type": "object",
                "properties": {
                    "countryId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "code": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "code",
                    "countryId",
                    "createdAt",
                    "name",
                    "status",
                    "updatedAt"
                ]
            },
            "CountryResponse": {
                "type": "object",
                "properties": {
                    "countryId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "code": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "code",
                    "countryId",
                    "createdAt",
                    "name",
                    "status",
                    "updatedAt"
                ]
            },
            "CreateLocationRequestContent": {
                "type": "object",
                "properties": {
                    "userId": {
                        "type": "string"
                    },
                    "countryId": {
                        "type": "string"
                    },
                    "regionId": {
                        "type": "string"
                    },
                    "cityId": {
                        "type": "string"
                    },
                    "neighborhoodId": {
                        "type": "string"
                    },
                    "address": {
                        "type": "string"
                    },
                    "postalCode": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "longitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "locationType": {
                        "$ref": "#/components/schemas/LocationType"
                    }
                },
                "required": [
                    "address",
                    "cityId",
                    "countryId",
                    "locationType",
                    "regionId",
                    "userId"
                ]
            },
            "CreateLocationResponseContent": {
                "type": "object",
                "properties": {
                    "locationId": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "countryId": {
                        "type": "string"
                    },
                    "regionId": {
                        "type": "string"
                    },
                    "cityId": {
                        "type": "string"
                    },
                    "neighborhoodId": {
                        "type": "string"
                    },
                    "address": {
                        "type": "string"
                    },
                    "postalCode": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "longitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "locationType": {
                        "$ref": "#/components/schemas/LocationType"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    }
                },
                "required": [
                    "address",
                    "cityId",
                    "countryId",
                    "createdAt",
                    "locationId",
                    "locationType",
                    "regionId",
                    "status",
                    "userId"
                ]
            },
            "DeleteLocationResponseContent": {
                "type": "object",
                "properties": {
                    "deleted": {
                        "type": "boolean"
                    },
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "deleted",
                    "message"
                ]
            },
            "GetCitiesByRegionResponseContent": {
                "type": "object",
                "properties": {
                    "cities": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CityResponse"
                        }
                    }
                },
                "required": [
                    "cities"
                ]
            },
            "GetCountriesResponseContent": {
                "type": "object",
                "properties": {
                    "countries": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CountryResponse"
                        }
                    }
                },
                "required": [
                    "countries"
                ]
            },
            "GetLocationResponseContent": {
                "type": "object",
                "properties": {
                    "locationId": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "country": {
                        "$ref": "#/components/schemas/CountryInfo"
                    },
                    "region": {
                        "$ref": "#/components/schemas/RegionInfo"
                    },
                    "city": {
                        "$ref": "#/components/schemas/CityInfo"
                    },
                    "neighborhood": {
                        "$ref": "#/components/schemas/NeighborhoodInfo"
                    },
                    "address": {
                        "type": "string"
                    },
                    "postalCode": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "longitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "locationType": {
                        "$ref": "#/components/schemas/LocationType"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    }
                },
                "required": [
                    "address",
                    "city",
                    "country",
                    "createdAt",
                    "locationId",
                    "locationType",
                    "region",
                    "status",
                    "updatedAt",
                    "userId"
                ]
            },
            "GetNeighborhoodsByCityResponseContent": {
                "type": "object",
                "properties": {
                    "neighborhoods": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/NeighborhoodResponse"
                        }
                    }
                },
                "required": [
                    "neighborhoods"
                ]
            },
            "GetRegionsByCountryResponseContent": {
                "type": "object",
                "properties": {
                    "regions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/RegionResponse"
                        }
                    }
                },
                "required": [
                    "regions"
                ]
            },
            "ListLocationsResponseContent": {
                "type": "object",
                "properties": {
                    "locations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/LocationResponse"
                        }
                    },
                    "page": {
                        "type": "number"
                    },
                    "size": {
                        "type": "number"
                    },
                    "total": {
                        "type": "number"
                    },
                    "totalPages": {
                        "type": "number"
                    }
                },
                "required": [
                    "locations",
                    "page",
                    "size",
                    "total",
                    "totalPages"
                ]
            },
            "LocationResponse": {
                "type": "object",
                "properties": {
                    "locationId": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "country": {
                        "$ref": "#/components/schemas/CountryInfo"
                    },
                    "region": {
                        "$ref": "#/components/schemas/RegionInfo"
                    },
                    "city": {
                        "$ref": "#/components/schemas/CityInfo"
                    },
                    "neighborhood": {
                        "$ref": "#/components/schemas/NeighborhoodInfo"
                    },
                    "address": {
                        "type": "string"
                    },
                    "postalCode": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "longitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "locationType": {
                        "$ref": "#/components/schemas/LocationType"
                    },
                    "status": {
                        "type": "string"
                    }
                },
                "required": [
                    "address",
                    "city",
                    "country",
                    "locationId",
                    "locationType",
                    "region",
                    "status",
                    "userId"
                ]
            },
            "LocationType": {
                "type": "string",
                "enum": [
                    "HOME",
                    "WORK",
                    "BILLING",
                    "SHIPPING",
                    "OTHER"
                ]
            },
            "NeighborhoodInfo": {
                "type": "object",
                "properties": {
                    "neighborhoodId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "cityId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "cityId",
                    "createdAt",
                    "name",
                    "neighborhoodId",
                    "status",
                    "updatedAt"
                ]
            },
            "NeighborhoodResponse": {
                "type": "object",
                "properties": {
                    "neighborhoodId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "cityId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "cityId",
                    "createdAt",
                    "name",
                    "neighborhoodId",
                    "status",
                    "updatedAt"
                ]
            },
            "NotFoundErrorResponseContent": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "message"
                ]
            },
            "RegionInfo": {
                "type": "object",
                "properties": {
                    "regionId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "code": {
                        "type": "string"
                    },
                    "countryId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "code",
                    "countryId",
                    "createdAt",
                    "name",
                    "regionId",
                    "status",
                    "updatedAt"
                ]
            },
            "RegionResponse": {
                "type": "object",
                "properties": {
                    "regionId": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "code": {
                        "type": "string"
                    },
                    "countryId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string"
                    },
                    "updatedAt": {
                        "type": "string"
                    }
                },
                "required": [
                    "code",
                    "countryId",
                    "createdAt",
                    "name",
                    "regionId",
                    "status",
                    "updatedAt"
                ]
            },
            "UpdateLocationRequestContent": {
                "type": "object",
                "properties": {
                    "countryId": {
                        "type": "string"
                    },
                    "regionId": {
                        "type": "string"
                    },
                    "cityId": {
                        "type": "string"
                    },
                    "neighborhoodId": {
                        "type": "string"
                    },
                    "address": {
                        "type": "string"
                    },
                    "postalCode": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "longitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "locationType": {
                        "$ref": "#/components/schemas/LocationType"
                    }
                }
            },
            "UpdateLocationResponseContent": {
                "type": "object",
                "properties": {
                    "locationId": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "country": {
                        "$ref": "#/components/schemas/CountryInfo"
                    },
                    "region": {
                        "$ref": "#/components/schemas/RegionInfo"
                    },
                    "city": {
                        "$ref": "#/components/schemas/CityInfo"
                    },
                    "neighborhood": {
                        "$ref": "#/components/schemas/NeighborhoodInfo"
                    },
                    "address": {
                        "type": "string"
                    },
                    "postalCode": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "longitude": {
                        "type": "number",
                        "format": "double"
                    },
                    "locationType": {
                        "$ref": "#/components/schemas/LocationType"
                    },
                    "updatedAt": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    }
                },
                "required": [
                    "address",
                    "city",
                    "country",
                    "locationId",
                    "locationType",
                    "region",
                    "status",
                    "updatedAt",
                    "userId"
                ]
            },
            "ValidationErrorResponseContent": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "field": {
                        "type": "string"
                    }
                },
                "required": [
                    "field",
                    "message"
                ]
            }
        }
    }
}
